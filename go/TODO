- make handlers thread safe
- if nothing written in response throw error?
- wrap entry to handle panics?